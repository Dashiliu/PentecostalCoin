

|                    | 老元数据系统                                                 | apache atlas                                                 | vue-metadata                                                 |
| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 血缘图前端实现组件 | echarts 的 sankey图                                          | 基于d3的dagreD3.js                                           | echarts的graph实现                                           |
| 缺点               | 节点数多时展示很不清晰,节点名字显示不全,灵活度很低,节点/连接线样式无法调整 | 文档不多,dagreD3已经处于非活跃状态,基于节点查看脚本或sql     | 文档不多,现有例子略丑,基于节点查看脚本或sql                  |
| 优点               | echarts的文档很好,很活跃,基于连接线查看脚本或sql             | 灵活度非常高,节点和连接线清晰,满足血缘图中复杂的需求,如dim的连接,按层设置样式等 | 已有基于vue的实现,节点和连接线清晰,满足血缘图中复杂的需求,如dim的连接,按层设置样式等 |
| 推荐               |                                                              | √                                                            | √                                                            |

##                                         血缘图需求收集

| 需求                | 实现明细                                                     |
| ------------------- | ------------------------------------------------------------ |
| 已有功能            | 1.点击表节点展示表状态2.展示数据连接的sql或脚本              |
| 展示更清晰,样式可控 | 1.血缘层级默认显示6级上游3级,下游3级;可手动筛选更多层级                                                              2.采用tree样式,老元数据使用的sankey 样式在表多了之后很不清晰                                                         3.数仓层级展示: 通过表的库名前缀,自定义节点样式 |
| 自动采集            | 1.注释血缘图和sql血缘图只保留sql血缘图,会添加脚本解析辅助血缘图管理                                     2.sql血缘图通过解析消费运维采集的sql的topic,识别血缘图的输入节点和输出节点,同时需要添加临时表过滤策略 |
| 表可用状态          | 1.调用元数据或监控api展示表可用状态                          |